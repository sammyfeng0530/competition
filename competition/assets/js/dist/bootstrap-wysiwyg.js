!function a(i,l,c){function s(e,t){if(!l[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var r=l[e]={exports:{}};i[e][0].call(r.exports,function(t){return s(i[e][1][t]||t)},r,r.exports,a,i,l,c)}return l[e].exports}for(var u="function"==typeof require&&require,t=0;t<c.length;t++)s(c[t]);return s}({1:[function(t,e,n){"use strict";var h;(h=window.jQuery).fn.cleanHtml=function(){var t=h(this).html();return t&&t.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},h.fn.wysiwyg=function(t){function a(){s.activeToolbarClass&&h(s.toolbarSelector).find(u).each(function(){var t=h(this).data(s.commandRole);document.queryCommandState(t)?h(this).addClass(s.activeToolbarClass):h(this).removeClass(s.activeToolbarClass)})}function n(t,e){var n=t.split(" "),o=n.shift(),r=n.join(" ")+(e||"");document.execCommand(o,0,r),a()}function o(){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}function r(){c=o()}function i(){var t=window.getSelection();if(c){try{t.removeAllRanges()}catch(t){document.body.createTextRange().select(),document.selection.empty()}t.addRange(c)}}function l(t){p.focus(),h.each(t,function(t,e){/^image\//.test(e.type)?h.when(function(t){var e=h.Deferred(),n=new FileReader;return n.onload=function(t){e.resolve(t.target.result)},n.onerror=e.reject,n.onprogress=e.notify,n.readAsDataURL(t),e.promise()}(e)).done(function(t){n("insertimage",t)}).fail(function(t){s.fileUploadError("file-reader",t)}):s.fileUploadError("unsupported-file-type",e.type)})}function e(t,e){i(),document.queryCommandSupported("hiliteColor")&&document.execCommand("hiliteColor",0,e||"transparent"),r(),t.data(s.selectionMarker,e)}var c,s,u,d,f,m,p=this;return s=h.extend({},h.fn.wysiwyg.defaults,t),u="a[data-"+s.commandRole+"],button[data-"+s.commandRole+"],input[type=button][data-"+s.commandRole+"]",d=s.hotKeys,h.each(d,function(t,e){p.keydown(t,function(t){p.attr("contenteditable")&&p.is(":visible")&&(t.preventDefault(),t.stopPropagation(),n(e))}).keyup(t,function(t){p.attr("contenteditable")&&p.is(":visible")&&(t.preventDefault(),t.stopPropagation())})}),s.dragAndDropImages&&p.on("dragenter dragover",!1).on("drop",function(t){var e=t.originalEvent.dataTransfer;t.stopPropagation(),t.preventDefault(),e&&e.files&&0<e.files.length&&l(e.files)}),f=h(s.toolbarSelector),m=s,f.find(u).click(function(){i(),p.focus(),n(h(this).data(m.commandRole)),r()}),f.find("[data-toggle=dropdown]").click(i),f.find("input[type=text][data-"+m.commandRole+"]").on("webkitspeechchange change",function(){var t=this.value;this.value="",i(),t&&(p.focus(),n(h(this).data(m.commandRole),t)),r()}).on("focus",function(){var t=h(this);t.data(m.selectionMarker)||(e(t,m.selectionColor),t.focus())}).on("blur",function(){var t=h(this);t.data(m.selectionMarker)&&e(t,!1)}),f.find("input[type=file][data-"+m.commandRole+"]").change(function(){i(),"file"===this.type&&this.files&&0<this.files.length&&l(this.files),r(),this.value=""}),p.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){r(),a()}),h(window).bind("touchend",function(t){var e=p.is(t.target)||0<p.has(t.target).length,n=o();n&&n.startContainer===n.endContainer&&n.startOffset===n.endOffset&&!e||(r(),a())}),this},h.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,fileUploadError:function(t,e){console.log("File upload error",t,e)}}},{}]},{},[1]);
//# sourceMappingURL=bootstrap-wysiwyg.js.map
